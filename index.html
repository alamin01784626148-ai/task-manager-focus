<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ultimate Task & Focus Manager</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top, #1e1b4b, #020617);
    }
    .glass {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255,255,255,0.15);
    }
  </style>
</head>

<body class="text-white min-h-screen p-4">

<div class="max-w-5xl mx-auto space-y-6">

  <!-- Header -->
  <header class="glass rounded-2xl p-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">üß† Ultimate Task & Focus</h1>
    <div id="clock" class="text-sm opacity-80"></div>
  </header>

  <!-- Tabs -->
  <div class="flex gap-2">
    <button onclick="switchTab('tasks')" class="tab-btn bg-indigo-600 px-4 py-2 rounded-xl">Tasks</button>
    <button onclick="switchTab('journal')" class="tab-btn glass px-4 py-2 rounded-xl">My Day</button>
    <button onclick="switchTab('focus')" class="tab-btn glass px-4 py-2 rounded-xl">Focus</button>
  </div>

  <!-- TASK MANAGER -->
  <section id="tasks" class="tab glass rounded-2xl p-4 space-y-4">

    <!-- Add Task -->
    <div class="grid md:grid-cols-4 gap-2">
      <input id="taskTitle" placeholder="Task title" class="p-2 rounded-lg text-black">
      <select id="priority" class="p-2 rounded-lg text-black">
        <option value="High">High</option>
        <option value="Medium">Medium</option>
        <option value="Low">Low</option>
      </select>
      <input type="datetime-local" id="dueTime" class="p-2 rounded-lg text-black">
      <button onclick="addTask()" class="bg-indigo-600 rounded-lg">Add</button>
    </div>

    <!-- Filters -->
    <div class="flex flex-wrap gap-2 text-sm">
      <select id="statusFilter" onchange="renderTasks()" class="p-2 rounded-lg text-black">
        <option value="all">All</option>
        <option value="active">Active</option>
        <option value="done">Completed</option>
      </select>

      <select id="priorityFilter" onchange="renderTasks()" class="p-2 rounded-lg text-black">
        <option value="all">All Priority</option>
        <option value="High">High ‚Üí Low</option>
        <option value="Low">Low ‚Üí High</option>
      </select>
    </div>

    <!-- Task List -->
    <div id="taskList" class="space-y-2"></div>
  </section>

  <!-- DAILY JOURNAL -->
  <section id="journal" class="tab hidden glass rounded-2xl p-4 space-y-3">
    <input type="date" id="logDate" class="p-2 rounded-lg text-black w-full">
    <textarea id="logText" rows="5" placeholder="Write about your day..."
      class="p-2 rounded-lg text-black w-full"></textarea>
    <button onclick="saveLog()" class="bg-indigo-600 px-4 py-2 rounded-lg">Save Log</button>
    <div id="logHistory" class="text-sm space-y-2"></div>
  </section>

  <!-- POMODORO -->
  <section id="focus" class="tab hidden glass rounded-2xl p-6 text-center space-y-4">
    <h2 class="text-lg font-semibold">Pomodoro Focus</h2>
    <div class="w-48 h-48 mx-auto rounded-full border-8 border-indigo-500 flex items-center justify-center text-3xl"
         id="timer">25:00</div>
    <div class="space-x-2">
      <button onclick="startTimer()" class="bg-green-500 px-4 py-2 rounded-lg">Play</button>
      <button onclick="pauseTimer()" class="bg-yellow-400 px-4 py-2 rounded-lg">Pause</button>
      <button onclick="resetTimer()" class="bg-red-500 px-4 py-2 rounded-lg">Reset</button>
    </div>
  </section>

</div>

<script>
/* CLOCK */
setInterval(()=>clock.innerText=new Date().toLocaleString(),1000);

/* TABS */
function switchTab(id){
  document.querySelectorAll('.tab').forEach(t=>t.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* TASKS */
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

function addTask(){
  tasks.push({
    id: Date.now(),
    title: taskTitle.value,
    priority: priority.value,
    due: dueTime.value,
    done:false
  });
  saveTasks();
}

function saveTasks(){
  localStorage.setItem("tasks",JSON.stringify(tasks));
  renderTasks();
}

function renderTasks(){
  taskList.innerHTML="";
  let filtered=[...tasks];

  if(statusFilter.value==="active") filtered=filtered.filter(t=>!t.done);
  if(statusFilter.value==="done") filtered=filtered.filter(t=>t.done);

  if(priorityFilter.value==="High")
    filtered.sort((a,b)=>prio(b)-prio(a));
  if(priorityFilter.value==="Low")
    filtered.sort((a,b)=>prio(a)-prio(b));

  filtered.forEach(t=>{
    const color = t.priority==="High"?"bg-red-500":
                  t.priority==="Medium"?"bg-yellow-400":"bg-green-500";
    taskList.innerHTML+=`
    <div class="glass rounded-xl p-3 flex justify-between items-center">
      <div>
        <p class="${t.done?'line-through opacity-60':''}">${t.title}</p>
        <small>${t.priority} ${t.due?`| ‚è∞ ${t.due}`:""}</small>
      </div>
      <div class="space-x-2">
        <button onclick="toggle(${t.id})" class="${color} px-2 rounded">‚úì</button>
        <button onclick="del(${t.id})" class="bg-gray-700 px-2 rounded">‚úï</button>
      </div>
    </div>`;
  });
}
function prio(t){return t.priority==="High"?3:t.priority==="Medium"?2:1}
function toggle(id){tasks.find(t=>t.id==id).done^=1;saveTasks()}
function del(id){tasks=tasks.filter(t=>t.id!=id);saveTasks()}

/* JOURNAL */
let logs=JSON.parse(localStorage.getItem("logs"))||{};
function saveLog(){
  logs[logDate.value]=logText.value;
  localStorage.setItem("logs",JSON.stringify(logs));
  renderLogs();
}
function renderLogs(){
  logHistory.innerHTML="";
  Object.keys(logs).sort().reverse().forEach(d=>{
    logHistory.innerHTML+=`<div class="glass p-2 rounded-lg">
      <b>${d}</b><p>${logs[d]}</p></div>`;
  });
}
renderLogs();

/* REMINDER */
setInterval(()=>{
  let now=new Date().toISOString().slice(0,16);
  tasks.forEach(t=>{
    if(t.due===now && !t.done){
      alert("‚è∞ Task Due: "+t.title);
      if(Notification.permission==="granted")
        new Notification(t.title);
    }
  });
},60000);

/* POMODORO */
let time=1500, intv;
function updateTimer(){
  let m=Math.floor(time/60), s=time%60;
  timer.innerText=`${m}:${s.toString().padStart(2,'0')}`;
}
function startTimer(){
  if(intv) return;
  intv=setInterval(()=>{
    if(time>0){time--;updateTimer()}
    else{alert("Break Time!");resetTimer()}
  },1000);
}
function pauseTimer(){clearInterval(intv);intv=null}
function resetTimer(){pauseTimer();time=1500;updateTimer()}
updateTimer();

renderTasks();
Notification.requestPermission();
</script>

</body>
</html>